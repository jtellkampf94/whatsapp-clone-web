(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5211:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return _r},default:function(){return Ir}});var r=n(5861),o=n(2982),i=n(885),a=n(7757),c=n.n(a),s=n(7294),l=n(9008),u=n(1163),d=n(6075),h=n(5051),p=n(7411),f=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},m=function(e,t){var n=e.filter((function(e){return Number(e.id)!==t}))[0];return"".concat(f(n.firstName)," ").concat(f(n.lastName))},g=n(4803),x=n.n(g),b=n(5893),v=function(e){if(void 0!==e){var t,n,r=new Date(e),o=new Date;return n=r,(t=o).getFullYear()===n.getFullYear()&&t.getMonth()===n.getMonth()&&t.getDate()===n.getDate()?(0,b.jsx)(x(),{format:"HH:mm",children:e}):function(e,t){return Math.abs(t.getTime()-e.getTime())/864e5}(o,r)<1&&o.getDay()!==r.getDay()?"Yesterday":(0,b.jsx)(x(),{format:"DD-MM-YYYY",children:e})}},w=n(9163),C=n(3901),y=n(2792),j=w.ZP.div.withConfig({displayName:"ChatScreen__Container",componentId:"sc-nhvs0h-0"})(["width:100%;height:calc(100vh - 77px);"]),k=w.ZP.div.withConfig({displayName:"ChatScreen__Header",componentId:"sc-nhvs0h-1"})(["padding:10px 17px;display:flex;align-items:center;justify-content:space-between;height:67px;background-color:",";border-bottom:1px solid ",";"],(function(e){return e.theme.globalTheme.primaryGrey}),(function(e){return e.theme.globalTheme.greyLineColor})),_=w.ZP.div.withConfig({displayName:"ChatScreen__IconsContainer",componentId:"sc-nhvs0h-2"})(["display:flex;align-items:center;"]),I=(0,w.ZP)(C.Z).withConfig({displayName:"ChatScreen__UserAvatar",componentId:"sc-nhvs0h-3"})(["cursor:pointer;&:hover{opacity:0.8;}"]),A=w.ZP.p.withConfig({displayName:"ChatScreen__Name",componentId:"sc-nhvs0h-4"})(["font-size:19px;font-weight:400;margin-left:17px;"]),P=w.ZP.div.withConfig({displayName:"ChatScreen__EndOfMessage",componentId:"sc-nhvs0h-5"})([""]),Z=w.ZP.div.withConfig({displayName:"ChatScreen__MessagesContainer",componentId:"sc-nhvs0h-6"})(["background-image:url(",");background-color:",";height:calc(100vh - 144px);overflow-y:scroll;display:flex;flex-direction:column-reverse;padding:0 9%;scrollbar-width:thin;&::-webkit-scrollbar{width:6px !important;height:6px !important;}&::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,0.2);}&::-webkit-scrollbar-track{background:hsla(0,0%,100%,0.1);}"],"/_next/static/image/assets/images/chat-section-background.39f53e74f66d348d9f7c26384eea0f98.png",(function(e){return e.theme.globalTheme.chatScreenBackground})),N=function(e){var t=e.name,n=e.isGroupChat,r=e.endOfMessageRef,o=e.groupAvatarUrl,i=e.profilePictureUrl,a=e.children;return(0,b.jsxs)(j,{children:[(0,b.jsx)(k,{children:(0,b.jsxs)(_,{children:[n?(0,b.jsx)(I,{style:{width:"44px",height:"44px"},src:o,children:(0,b.jsx)(y.Z,{style:{width:"34px",height:"34px"}})}):(0,b.jsx)(I,{style:{width:"44px",height:"44px"},src:i}),(0,b.jsx)(A,{children:t})]})}),(0,b.jsxs)(Z,{children:[(0,b.jsx)(P,{ref:r}),a]})]})},T=(0,w.ZP)("div").withConfig({displayName:"Message__Container",componentId:"sc-1tqv8mv-0"})(["background-color:",";display:flex;flex-direction:column;border-radius:7.5px;padding:8px 9px;width:fit-content;max-width:290px;margin:10px 0;align-self:",";& p,div{text-align:",";justify-content:",";}"],(function(e){return e.isUser?e.theme.globalTheme.messageGreen:e.theme.globalTheme.hoverGrey}),(function(e){return e.isUser?"flex-end":"flex-start"}),(function(e){return e.isUser?"right":"left"}),(function(e){return e.isUser?"flex-end":"flex-start"})),S=(0,w.ZP)("p").withConfig({displayName:"Message__Header",componentId:"sc-1tqv8mv-1"})(["&::first-letter{text-transform:uppercase;}font-weight:700;font-size:14px;color:",";"],(function(e){return e.color?e.color:"black"})),U=w.ZP.p.withConfig({displayName:"Message__Text",componentId:"sc-1tqv8mv-2"})([""]),z=w.ZP.div.withConfig({displayName:"Message__MessageFooter",componentId:"sc-1tqv8mv-3"})(["width:100%;display:flex;"]),M=w.ZP.p.withConfig({displayName:"Message__DateSent",componentId:"sc-1tqv8mv-4"})(["font-size:11px;margin-right:5px;color:",";"],(function(e){return e.theme.globalTheme.greyMessageColor})),O=w.ZP.img.withConfig({displayName:"Message__Img",componentId:"sc-1tqv8mv-5"})(["object-fit:cover;max-width:280px;max-height:230px;border-radius:5px;"]),E=function(e){var t=e.isUser,n=e.text,r=e.sender,o=e.color,i=e.dateSent,a=e.imageUrl;return(0,b.jsxs)(T,{isUser:t,children:[r&&(0,b.jsx)(S,{color:o,children:r}),a&&(0,b.jsx)(O,{src:a}),(0,b.jsx)(U,{children:n}),(0,b.jsx)(z,{children:(0,b.jsx)(M,{children:i})})]})},F=n(7812),B=n(2904),G=n(3910),D=n(3606),L=w.ZP.div.withConfig({displayName:"ChatFormContainer__Container",componentId:"sc-dvlwu5-0"})(["background-color:",";display:flex;align-items:center;justify-content:center;border-top:1px solid ",";border-bottom:1px solid ",";"],(function(e){return e.theme.globalTheme.chatBoxBackground}),(function(e){return e.theme.globalTheme.greyLineColor}),(function(e){return e.theme.globalTheme.greyLineColor})),Q=function(e){var t=e.children;return(0,b.jsx)(L,{children:t})},H=w.ZP.form.withConfig({displayName:"ChatFormForm__Form",componentId:"sc-8qf4i2-0"})(["padding:10px 17px;display:flex;align-items:center;width:100%;"]),R=function(e){var t=e.children,n=e.onSubmit;return(0,b.jsx)(H,{onSubmit:n,children:t})},q=w.ZP.input.withConfig({displayName:"ChatFormInput__Input",componentId:"sc-1jvl6m2-0"})(["outline-width:0;padding-left:17px;border:none;width:100%;margin:0 17px;font-size:16px;height:36px;border-radius:18px;&::placeholder{color:",";}"],(function(e){return e.theme.globalTheme.greyFontColor})),Y=function(e){var t=e.onChange,n=e.value;return(0,b.jsx)(q,{onChange:t,value:n,placeholder:"Type a message"})},W=function(e){var t=e.chatId,n=e.setMessageText,o=e.setPreview,a=e.messageText,l=e.scrollToBottom,u=(0,s.useState)(null),d=u[0],p=u[1],f=(0,s.useRef)(null),m=(0,h.at)(),g=(0,i.Z)(m,1)[0];(0,s.useEffect)((function(){if(d){var e=new FileReader;e.onloadend=function(){o(e.result)},e.readAsDataURL(d)}else o(null)}),[d]);var x=function(){var e=(0,r.Z)(c().mark((function e(r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,g({variables:{chatId:t,text:a}});case 5:n(""),l();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsx)(Q,{children:(0,b.jsxs)(R,{onSubmit:x,children:[(0,b.jsxs)(F.Z,{onClick:function(){var e;null===f||void 0===f||null===(e=f.current)||void 0===e||e.click()},type:"button",children:[(0,b.jsx)(B.Z,{style:{fill:D._.iconColor,width:"30px",height:"30px"}}),(0,b.jsx)("input",{type:"file",accept:"image/*",style:{display:"none"},onChange:function(e){p(e.target.files?e.target.files[0]:null)},onClick:function(e){e.target.value=""},ref:f})]}),(0,b.jsx)(Y,{onChange:function(e){n(e.target.value)},value:a}),(0,b.jsx)(F.Z,{type:"submit",children:(0,b.jsx)(G.Z,{style:{fill:D._.iconColor,width:"30px",height:"30px"}})})]})})},X=n(5880),K=(0,w.ZP)("div").withConfig({displayName:"Spinner__Container",componentId:"sc-7syvoa-0"})(["width:100%;height:",";display:flex;align-items:center;justify-content:center;"],(function(e){return e.small?"50px":"100%"})),$=function(e){var t=e.small;return(0,b.jsx)(K,{small:t||!1,children:(0,b.jsx)(X.iT,{color:D._.darkGreen,width:40,height:40})})},V=n(9669),J=n.n(V),ee=n(3275),te=function(){var e=(0,s.useState)({x:0,y:0}),t=e[0],n=e[1],r=(0,s.useState)(1),o=r[0],i=r[1],a=(0,s.useState)(0),c=a[0],l=a[1],u=(0,s.useState)(null),d=u[0],h=u[1],p=(0,s.useCallback)((function(e,t){h(t)}),[]);return{crop:t,setCrop:n,zoom:o,setZoom:i,zoomIn:function(){i((function(e){return e+.1}))},zoomOut:function(){i((function(e){return e-.1}))},onCropComplete:p,croppedAreaPixels:d,rotation:c,setRotation:l,rotateClockwise:function(){l((function(e){return e+10}))},rotateAntiClockwise:function(){l((function(e){return e-10}))}}},ne=function(e){return new Promise((function(t,n){var r=new Image;r.addEventListener("load",(function(){return t(r)})),r.addEventListener("error",(function(e){return n(e)})),r.setAttribute("crossOrigin","anonymous"),r.src=e}))};function re(e){return e*Math.PI/180}function oe(e,t,n){var r=re(n);return{width:Math.abs(Math.cos(r)*e)+Math.abs(Math.sin(r)*t),height:Math.abs(Math.sin(r)*e)+Math.abs(Math.cos(r)*t)}}function ie(e,t){return ae.apply(this,arguments)}function ae(){return(ae=(0,r.Z)(c().mark((function e(t,n){var r,o,i,a,s,l,u,d,h,p,f=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>2&&void 0!==f[2]?f[2]:0,o=f.length>3&&void 0!==f[3]?f[3]:{horizontal:!1,vertical:!1},e.next=4,ne(t);case 4:if(i=e.sent,a=document.createElement("canvas"),s=a.getContext("2d")){e.next=9;break}return e.abrupt("return",null);case 9:return l=re(r),u=oe(i.width,i.height,r),d=u.width,h=u.height,a.width=d,a.height=h,s.translate(d/2,h/2),s.rotate(l),s.scale(o.horizontal?-1:1,o.vertical?-1:1),s.translate(-i.width/2,-i.height/2),s.drawImage(i,0,0),p=s.getImageData(n.x,n.y,n.width,n.height),a.width=n.width,a.height=n.height,s.putImageData(p,0,0),e.abrupt("return",new Promise((function(e,t){a.toBlob((function(t){e(t)}),"image/jpeg")})));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce=w.ZP.div.withConfig({displayName:"MessageWithImageFormContainer__Container",componentId:"sc-ty3mgv-0"})(["position:absolute;bottom:0;left:0;right:0;top:67px;width:100%;height:calc(100vh - 67px);background-color:#e9edef;"]),se=function(e){var t=e.children;return(0,b.jsx)(ce,{children:t})},le=w.ZP.form.withConfig({displayName:"ImageForm__Form",componentId:"sc-1ok157f-0"})(["width:100%;height:100%;display:flex;flex-direction:column;position:relative;"]),ue=function(e){var t=e.children,n=e.onSubmit;return(0,b.jsx)(le,{onSubmit:n,children:t})},de=n(3957),he=n(64),pe=n(7419),fe=n(4779),me=n(366),ge=w.ZP.div.withConfig({displayName:"ImageFormButtons__Container",componentId:"sc-14l68wv-0"})(["display:flex;width:100%;position:relative;padding:20px;"]),xe=w.ZP.div.withConfig({displayName:"ImageFormButtons__ImageButtonsContainer",componentId:"sc-14l68wv-1"})(["display:flex;position:absolute;left:50%;transform:translateX(-50%);"]),be=w.ZP.button.withConfig({displayName:"ImageFormButtons__Button",componentId:"sc-14l68wv-2"})(["width:40px;height:40px;border:none;outline:none;border-radius:3px;background-color:transparent;display:flex;align-items:center;justify-content:center;color:#54656f;font-size:32px;margin:0 10px;&:hover{cursor:pointer;}"]),ve=function(e){var t=e.close,n=e.zoomIn,r=e.zoomOut,o=e.rotateClockwise,i=e.rotateAntiClockwise;return(0,b.jsxs)(ge,{children:[(0,b.jsx)(be,{type:"button",onClick:t,children:(0,b.jsx)(me.Z,{style:{fontSize:"32px"}})}),(0,b.jsxs)(xe,{children:[(0,b.jsx)(be,{type:"button",onClick:n,children:(0,b.jsx)(de.Z,{style:{fontSize:"32px"}})}),(0,b.jsx)(be,{type:"button",onClick:r,children:(0,b.jsx)(he.Z,{style:{fontSize:"32px"}})}),(0,b.jsx)(be,{type:"button",onClick:o,children:(0,b.jsx)(pe.Z,{style:{fontSize:"32px"}})}),(0,b.jsx)(be,{type:"button",onClick:i,children:(0,b.jsx)(fe.Z,{style:{fontSize:"32px"}})})]})]})},we=w.ZP.div.withConfig({displayName:"ImageFormInput__InputContainer",componentId:"sc-igdimp-0"})(["width:100%;display:flex;justify-content:center;padding:20px;margin-top:20px;"]),Ce=w.ZP.input.withConfig({displayName:"ImageFormInput__Input",componentId:"sc-igdimp-1"})(["height:45px;outline:none;border:none;border-radius:5px;width:70%;padding:20px;font-size:16px;&::placeholder{color:",";}"],(function(e){return e.theme.globalTheme.greyFontColor})),ye=function(e){var t=e.value,n=e.onChange;return(0,b.jsx)(we,{children:(0,b.jsx)(Ce,{type:"text",placeholder:"Type a message",onChange:n,value:t})})},je=w.ZP.div.withConfig({displayName:"ImageFormCropperContainer__Container",componentId:"sc-gth0ip-0"})(["width:100%;display:flex;justify-content:center;padding:20px;"]),ke=w.ZP.div.withConfig({displayName:"ImageFormCropperContainer__ImageCropperContainer",componentId:"sc-gth0ip-1"})(["position:relative;width:490px;height:285px;box-shadow:0 3px 12px rgba(11,20,26,0.16);border-radius:3px;overflow:hidden;"]),_e=function(e){var t=e.children;return(0,b.jsx)(je,{children:(0,b.jsx)(ke,{children:t})})},Ie=w.ZP.button.withConfig({displayName:"ImageFormSubmitButton__Button",componentId:"sc-12tu4p6-0"})(["background-color:#00a884;box-shadow:0 3px 12px rgba(11,20,26,0.16);border-radius:50%;border:none;outline:none;width:60px;height:60px;position:absolute;bottom:20px;right:20px;color:",";display:flex;justify-content:center;align-items:center;&:hover{filter:brightness(105%);cursor:pointer;}"],(function(e){return e.theme.globalTheme.white})),Ae=function(){return(0,b.jsx)(Ie,{type:"submit",children:(0,b.jsx)(G.Z,{})})},Pe=function(e){var t=e.chatId,n=e.setMessageText,o=e.messageText,a=e.scrollToBottom,l=e.preview,u=e.close,d=(0,h.Te)(),p=(0,i.Z)(d,2),f=p[0],m=p[1].data,g=(0,h.at)(),x=(0,i.Z)(g,1)[0],v=(0,s.useState)(null),w=v[0],C=v[1],y=te(),j=y.crop,k=y.setCrop,_=y.zoom,I=y.setZoom,A=y.zoomIn,P=y.zoomOut,Z=y.rotation,N=y.setRotation,T=y.rotateClockwise,S=y.rotateAntiClockwise,U=y.onCropComplete,z=y.croppedAreaPixels,M=(0,s.useCallback)(function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!z){e.next=9;break}return e.next=5,ie(l,z,Z);case 5:return n=e.sent,C(n),e.next=9,f();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),[z]);return(0,s.useEffect)((function(){m&&w&&function(){var e=(0,r.Z)(c().mark((function e(){var i,s,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!m||!w){e.next=10;break}return i=m.getPresignedUrl,s=i.presignedUrl,l=i.key,e.next=4,J().put(s,w,{headers:{"Content-Type":w.type}});case 4:return d="".concat("https://jt-whatsapp-clone-bucket.s3.eu-west-2.amazonaws.com","/").concat(l),e.next=7,x({variables:{chatId:t,text:o,imageUrl:d},update:function(){var e=(0,r.Z)(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.data,t.modify({fields:{getPresignedUrl:function(){}}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()});case 7:n(""),u(),a();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[m]),(0,b.jsx)(se,{children:(0,b.jsxs)(ue,{onSubmit:M,children:[(0,b.jsx)(ve,{close:u,zoomIn:A,zoomOut:P,rotateClockwise:T,rotateAntiClockwise:S}),(0,b.jsx)(_e,{children:(0,b.jsx)(ee.Z,{image:l,crop:j,zoom:_,aspect:1,onCropChange:k,rotation:Z,onRotationChange:N,onCropComplete:U,onZoomChange:I})}),(0,b.jsx)(ye,{value:o,onChange:function(e){n(e.target.value)}}),(0,b.jsx)(Ae,{})]})})},Ze=function(e){var t,n,r=e.chatId,i=e.chat,a=e.userId,c=(0,s.useRef)(null),l=(0,s.useState)(""),u=l[0],d=l[1],g=(0,s.useState)(10),x=g[0],w=(g[1],(0,s.useState)(null)),C=w[0],y=w[1],j=(0,h.E0)({variables:{chatId:r,limit:x},notifyOnNetworkStatusChange:!0}),k=j.loading,_=(j.error,j.refetch),I=j.data,A=j.subscribeToMore,P=j.fetchMore;(0,s.useEffect)((function(){_();var e=function(e){return A({document:h.u9,variables:{chatId:e,limit:x},updateQuery:function(t,n){var r=n.subscriptionData;if(!r.data)return t;var i=r.data.newMessage,a=Number(i.chatId);if(e===a){var c,s;if(null!==(c=t.getMessages)&&void 0!==c&&c.messages)return 0===t.getMessages.messages.filter((function(e){return Number(e.id)===Number(i.id)})).length?{getMessages:{messages:[i].concat((0,o.Z)(t.getMessages.messages)),hasMore:t.getMessages.hasMore}}:{getMessages:{messages:t.getMessages.messages.map((function(e){return Number(e.id)===Number(i.id)?i:e})),hasMore:t.getMessages.hasMore}};if(null===(s=t.getMessages)||void 0===s||!s.messages)return{getMessages:{messages:[i],hasMore:!1}}}return t}})}(r);return function(){return e()}}),[r]);var Z=function(){var e;null===(e=c.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"})};return(0,b.jsxs)(s.Fragment,{children:[(0,b.jsxs)(N,{name:i.groupName?i.groupName:m(i.members,a),isGroupChat:!!i.groupName,profilePictureUrl:i.members[0].profilePictureUrl?i.members[0].profilePictureUrl:void 0,groupAvatarUrl:i.groupAvatarUrl?i.groupAvatarUrl:void 0,endOfMessageRef:c,children:[null===I||void 0===I||null===(t=I.getMessages)||void 0===t?void 0:t.messages.map((function(e){var t=a===Number(e.user.id);return(0,b.jsx)(E,{isUser:t,text:e.text,sender:t?void 0:"".concat(f(e.user.firstName)," ").concat(f(e.user.lastName)),dateSent:v(e.createdAt),imageUrl:e.imageUrl?e.imageUrl:void 0},"messageId-".concat(e.id))})),k&&(null===I||void 0===I?void 0:I.getMessages)&&(0,b.jsx)($,{small:!0}),k&&!(null!==I&&void 0!==I&&I.getMessages)&&(0,b.jsx)($,{}),(null===I||void 0===I||null===(n=I.getMessages)||void 0===n?void 0:n.hasMore)&&(0,b.jsx)(p.h,{onEnter:function(){null!==I&&void 0!==I&&I.getMessages&&P({variables:{limit:x,cursor:I.getMessages.messages[I.getMessages.messages.length-1].createdAt}})}})]}),C?(0,b.jsx)(Pe,{chatId:r,setMessageText:d,messageText:u,scrollToBottom:Z,preview:C,close:function(){y(null)}}):(0,b.jsx)(W,{chatId:r,setPreview:y,setMessageText:d,messageText:u,scrollToBottom:Z})]})},Ne=n(4942),Te=n(8513),Se=n(9834),Ue=w.ZP.div.withConfig({displayName:"SidebarMenuContainer__Container",componentId:"sc-1f8eoy2-0"})(["position:relative;"]),ze=function(e){var t=e.children;return(0,b.jsx)(Ue,{children:t})},Me=n(8983),Oe=w.ZP.div.withConfig({displayName:"DropdownContent__ContentContainer",componentId:"sc-1beu5k8-0"})(["position:absolute;right:0px;top:calc(100% + 5px);overflow:hidden;border-radius:3px;box-shadow:0 2px 5px 0 rgba(0,0,0,0.1);padding:7px 0;background-color:",";width:200px;font-size:14px;color:",";&.dropdown-enter{pointer-events:none;opacity:0;transform:translateY(-10px);}&.dropdown-enter-active{opacity:1;transform:translateY(0px);pointer-events:auto;transition:opacity,transform 200ms ease-in-out;}&.dropdown-exit{transform:translateY(0px);transition:opacity,transform 200ms ease-in-out;}&.dropdown-exit-active{transform:translateY(-10px);opacity:0;pointer-events:none;}"],(function(e){return e.theme.globalTheme.white}),(function(e){return e.theme.globalTheme.secondaryGreyFont})),Ee=function(e){var t=e.dropdownIn,n=e.children;return(0,b.jsx)(Me.Z,{classNames:"dropdown",in:t,timeout:300,unmountOnExit:!0,children:(0,b.jsx)(Oe,{children:n})})},Fe=function(e){var t=e.children,n=(0,s.useState)(!1),r=n[0],o=n[1];return(0,b.jsxs)(ze,{children:[(0,b.jsx)(F.Z,{onClick:function(){return o(!r)},children:(0,b.jsx)(Te.Z,{style:{fill:D._.iconColor}})}),(0,b.jsx)(Se.default,{onOutsideClick:function(){return o(!1)},children:(0,b.jsx)(Ee,{dropdownIn:r,children:t})})]})},Be=n(8995),Ge=w.ZP.div.withConfig({displayName:"SearchBar__Container",componentId:"sc-3fdwwj-0"})(["display:flex;align-items:center;height:53px;padding:7px 14px;border-radius:2px;background-color:",";border-bottom:1px solid ",";"],(function(e){return e.theme.globalTheme.searchBarColor}),(function(e){return e.theme.globalTheme.greyLineColor})),De=w.ZP.div.withConfig({displayName:"SearchBar__Search",componentId:"sc-3fdwwj-1"})(["background-color:white;border-radius:18px;width:100%;display:flex;align-items:center;height:36px;padding:0 20px;"]),Le=w.ZP.input.withConfig({displayName:"SearchBar__SearchInput",componentId:"sc-3fdwwj-2"})(["outline-width:0;border:none;flex:1;width:100%;font-size:15px;margin-left:20px;height:20px;&::placeholder{color:",";}"],(function(e){return e.theme.globalTheme.greyFontColor})),Qe=function(e){var t=e.placeholder,n=e.onChange,r=e.value;return(0,b.jsx)(Ge,{children:(0,b.jsxs)(De,{children:[(0,b.jsx)(Be.Z,{fontSize:"small",style:{fill:D._.iconColor}}),(0,b.jsx)(Le,{onChange:n,value:r,placeholder:t})]})})},He=(0,w.ZP)("div").withConfig({displayName:"Chat__Container",componentId:"sc-4atca4-0"})(["width:100%;height:77px;padding:10px 24px 10px 16px;display:flex;align-items:center;border-bottom:1px solid ",";background-color:",";&:hover{cursor:pointer;background-color:",";}"],(function(e){return e.theme.globalTheme.greyLineColor}),(function(e){return e.highlighted?e.theme.globalTheme.selectGrey:"white"}),(function(e){return e.highlighted?e.theme.globalTheme.selectGrey:e.theme.globalTheme.hoverGrey})),Re=w.ZP.div.withConfig({displayName:"Chat__TextContainer",componentId:"sc-4atca4-1"})(["display:flex;flex-direction:column;margin-left:16px;justify-content:space-between;"]),qe=w.ZP.p.withConfig({displayName:"Chat__Name",componentId:"sc-4atca4-2"})(["font-size:16px;font-weight:400;"]),Ye=w.ZP.p.withConfig({displayName:"Chat__LatestMessage",componentId:"sc-4atca4-3"})(["font-size:16px;color:",";font-weight:300;"],(function(e){return e.theme.globalTheme.greyMessageColor})),We=w.ZP.div.withConfig({displayName:"Chat__TimeOfLatestMessage",componentId:"sc-4atca4-4"})(["display:flex;justify-content:flex-end;margin-left:auto;margin-top:10px;align-self:start;font-size:12px;color:",";font-weight:300;"],(function(e){return e.theme.globalTheme.greyMessageColor})),Xe=function(e){var t=e.isHighlighted,n=e.onClick,r=e.name,o=e.isGroupChat,i=e.latestMessage,a=e.timeOfLatestMessage,c=e.groupAvatarUrl,s=e.profilePictureUrl;return(0,b.jsxs)(He,{highlighted:t,onClick:n,children:[o?(0,b.jsx)(C.Z,{style:{width:"52px",height:"52px"},src:c,children:(0,b.jsx)(y.Z,{style:{width:"40px",height:"40px"}})}):(0,b.jsx)(C.Z,{style:{width:"52px",height:"52px"},src:s}),(0,b.jsxs)(Re,{children:[(0,b.jsx)(qe,{children:r}),i&&(0,b.jsx)(Ye,{children:i})]}),(0,b.jsx)(We,{children:a})]})},Ke=w.ZP.div.withConfig({displayName:"QueryResult__Container",componentId:"sc-15e93lm-0"})(["width:100%;height:100%;display:flex;align-items:center;justify-content:center;"]),$e=w.ZP.p.withConfig({displayName:"QueryResult__ErrorText",componentId:"sc-15e93lm-1"})(["font-size:16px;color:",";"],(function(e){return e.theme.globalTheme.errorRed})),Ve=function(e){var t=e.loading,n=e.error,r=e.children;return t?(0,b.jsx)($,{}):n?(0,b.jsx)(Ke,{children:(0,b.jsx)($e,{children:n.message})}):(0,b.jsx)(s.Fragment,{children:r})},Je=w.ZP.div.withConfig({displayName:"SidebarContainer__Container",componentId:"sc-boilpy-0"})(["width:100%;height:100%;display:flex;flex-direction:column;"]),et=function(e){var t=e.children;return(0,b.jsx)(Je,{children:t})},tt=n(3479),nt=w.ZP.div.withConfig({displayName:"SidebarHeader__Header",componentId:"sc-aud11h-0"})(["display:flex;position:sticky;top:0;background-color:",";z-index:1;justify-content:space-between;align-items:center;padding:10px 16px;height:67px;border-bottom:1px solid whitesmoke;"],(function(e){return e.theme.globalTheme.primaryGrey})),rt=(0,w.ZP)(C.Z).withConfig({displayName:"SidebarHeader__UserAvatar",componentId:"sc-aud11h-1"})(["cursor:pointer;&:hover{opacity:0.8;}"]),ot=w.ZP.div.withConfig({displayName:"SidebarHeader__IconsContainer",componentId:"sc-aud11h-2"})(["display:flex;align-items:center;"]),it=function(e){var t=e.onAvatarClick,n=e.profilePictureUrl,r=e.onContactsClick,o=e.children;return(0,b.jsxs)(nt,{children:[(0,b.jsx)(rt,{onClick:t,style:{width:"44px",height:"44px"},src:n}),(0,b.jsxs)(ot,{children:[(0,b.jsx)(F.Z,{onClick:r,children:(0,b.jsx)(tt.Z,{style:{fill:D._.iconColor}})}),o]})]})},at=w.ZP.div.withConfig({displayName:"SidebarChatContainer__Container",componentId:"sc-9storb-0"})(["width:100%;height:calc(100vh - 120px);overflow-y:auto;scrollbar-width:thin;&::-webkit-scrollbar{width:6px !important;height:6px !important;}&::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,0.2);}&::-webkit-scrollbar-track{background:hsla(0,0%,100%,0.1);}"]),ct=function(e){var t=e.children;return(0,b.jsx)(at,{children:t})},st=w.ZP.div.withConfig({displayName:"DropdownItem__Item",componentId:"sc-vxmyo0-0"})(["padding:10px 20px;&:hover{background-color:",";cursor:pointer;}"],(function(e){return e.theme.globalTheme.hoverGrey})),lt=function(e){var t=e.children,n=e.onClick;return(0,b.jsx)(st,{onClick:n,children:t})};function ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(n),!0).forEach((function(t){(0,Ne.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ht=function(e){var t=e.toContactsTab,n=e.toEditProfileTab,o=e.toSearchUsers,i=e.currentUser,a=e.handleSetChat,l=e.handleLogout,u=e.chatId,d=e.handleClick,p=(0,h.zj)({variables:{limit:1}}),f=p.data,g=p.loading,x=p.error,w=p.subscribeToMore,C=(0,s.useState)(""),y=C[0],j=C[1];(0,s.useEffect)((function(){var e=w({document:h.u9,updateQuery:function(e,t){var n=t.subscriptionData;if(!n.data)return e;var r=n.data.newMessage;return{getChats:e.getChats.map((function(e){return Number(e.id)===Number(r.chatId)?dt(dt({},e),{},{messages:[r]}):e}))}}});return function(){return e()}}),[]),(0,s.useEffect)((function(){f&&u&&a(f.getChats.filter((function(e){return Number(e.id)===u}))[0])}),[u]);var k=function(){var e=(0,r.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(t.target.value);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsxs)(et,{children:[(0,b.jsx)(it,{profilePictureUrl:null!==i&&void 0!==i&&i.profilePictureUrl?i.profilePictureUrl:void 0,onAvatarClick:n,onContactsClick:t,children:(0,b.jsxs)(Fe,{children:[(0,b.jsx)(lt,{onClick:o,children:"Search users"}),(0,b.jsx)(lt,{onClick:l,children:"Log out"})]})}),(0,b.jsx)(Qe,{value:y,onChange:k,placeholder:"Search in chats"}),(0,b.jsx)(ct,{children:(0,b.jsx)(Ve,{loading:g,error:x,children:i&&(null===f||void 0===f?void 0:f.getChats.filter((function(e){var t;return null===(t=e.messages)||void 0===t?void 0:t[0].text.includes(y)})).map((function(e){var t,n,r=Number(e.id);return(0,b.jsx)(Xe,{isHighlighted:u===r,onClick:function(){return d(r)},name:e.groupName?e.groupName:m(e.members,Number(i.id)),isGroupChat:!!e.groupName,groupAvatarUrl:e.groupAvatarUrl?e.groupAvatarUrl:void 0,profilePictureUrl:e.members[0].profilePictureUrl?e.members[0].profilePictureUrl:void 0,latestMessage:null===(t=e.messages)||void 0===t?void 0:t[0].text,timeOfLatestMessage:v(null===(n=e.messages)||void 0===n?void 0:n[0].createdAt)},"chatId-".concat(e.id))})))})})]})},pt=n(5675),ft=n(8599),mt={src:"/_next/static/image/assets/images/intro-connection-light.6cc48a1ebd61a3b3200f0c081d0fb2da.jpg",height:355,width:356,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAgACAMBIgACEQEDEQH/xAAUAAEAAAAAAAAAAAAAAAAAAAAH/9oACAEBAAAAAEr/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oACAECEAAAAH//xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oACAEDEAAAAD//xAAcEAABBAMBAAAAAAAAAAAAAAABAxETMQAFElH/2gAIAQEAAT8AmXGyhIMZS6djb+1n/8QAFxEBAAMAAAAAAAAAAAAAAAAAAQAxcf/aAAgBAgEBPwAb2f/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AI//2Q=="},gt=w.ZP.div.withConfig({displayName:"ChatPlaceholder__Container",componentId:"sc-wkwzwp-0"})(["display:flex;justify-content:center;align-items:center;width:100%;height:100%;background-color:",";border-bottom:6px solid #25d366;"],(function(e){return e.theme.globalTheme.smokeGrey})),xt=w.ZP.div.withConfig({displayName:"ChatPlaceholder__ContentContainer",componentId:"sc-wkwzwp-1"})(["display:flex;flex-direction:column;align-items:center;width:80%;max-width:560px;"]),bt=w.ZP.div.withConfig({displayName:"ChatPlaceholder__TextContainer",componentId:"sc-wkwzwp-2"})(["display:flex;flex-direction:column;align-items:center;color:",";"],(function(e){return e.theme.globalTheme.secondaryGreyFont})),vt=w.ZP.h1.withConfig({displayName:"ChatPlaceholder__Header",componentId:"sc-wkwzwp-3"})(["margin-top:28px;text-align:center;font-size:32px;font-weight:300;"]),wt=w.ZP.p.withConfig({displayName:"ChatPlaceholder__TextBody",componentId:"sc-wkwzwp-4"})(["margin-top:18px;text-align:center;padding-bottom:34px;font-size:14px;border-bottom:1px solid ",";"],(function(e){return e.theme.globalTheme.greyLineColor})),Ct=w.ZP.div.withConfig({displayName:"ChatPlaceholder__Footer",componentId:"sc-wkwzwp-5"})(["margin-top:34px;font-size:14px;display:flex;justify-content:center;"]),yt=w.ZP.p.withConfig({displayName:"ChatPlaceholder__FooterText",componentId:"sc-wkwzwp-6"})(["margin-left:5px;"]),jt=function(){return(0,b.jsx)(gt,{children:(0,b.jsxs)(xt,{children:[(0,b.jsx)(pt.default,{src:mt,width:250,height:250,alt:"keep connected"}),(0,b.jsxs)(bt,{children:[(0,b.jsx)(vt,{children:"Keep your phone connected"}),(0,b.jsx)(wt,{children:"WhatsApp connects to your phone to sync messages. To reduce data usage, connect your phone to Wi-Fi."}),(0,b.jsxs)(Ct,{children:[(0,b.jsx)(ft.Z,{style:{fontSize:"20px"}}),(0,b.jsx)(yt,{children:"Make calls from desktop with WhatsApp for Windows."})]})]})]})})},kt=w.ZP.div.withConfig({displayName:"Contact__Container",componentId:"sc-10t0a7o-0"})(["padding:10px 24px 10px 16px;display:flex;align-items:center;width:100%;height:77px;border-bottom:1px solid ",";&:hover{cursor:pointer;background-color:",";}"],(function(e){return e.theme.globalTheme.greyLineColor}),(function(e){return e.theme.globalTheme.hoverGrey})),_t=w.ZP.div.withConfig({displayName:"Contact__TextContainer",componentId:"sc-10t0a7o-1"})(["display:flex;flex-direction:column;margin-left:16px;width:100%;"]),It=w.ZP.h4.withConfig({displayName:"Contact__Name",componentId:"sc-10t0a7o-2"})(["font-size:16px;font-weight:400;"]),At=w.ZP.p.withConfig({displayName:"Contact__About",componentId:"sc-10t0a7o-3"})(["font-size:14px;color:",";"],(function(e){return e.theme.globalTheme.secondaryGreyFont})),Pt=function(e){var t=e.profilePictureUrl,n=e.firstName,r=e.lastName,o=e.about,i=e.onClick;return(0,b.jsxs)(kt,{onClick:i,children:[(0,b.jsx)(C.Z,{src:t||void 0,style:{width:"52px",height:"52px"}}),(0,b.jsxs)(_t,{children:[(0,b.jsx)(It,{children:"".concat(n," ").concat(r)}),(0,b.jsx)(At,{children:o})]})]})},Zt=w.ZP.div.withConfig({displayName:"Container__Wrapper",componentId:"sc-70vpe8-0"})(["width:100%;height:100%;"]),Nt=function(e){var t=e.children;return(0,b.jsx)(Zt,{children:t})},Tt=n(9826),St=w.ZP.div.withConfig({displayName:"Header__Container",componentId:"sc-1mmlp76-0"})(["width:100%;height:108px;background-color:",";color:",";padding:16px 28px;display:flex;align-items:flex-end;"],(function(e){return e.theme.globalTheme.darkGreen}),(function(e){return e.theme.globalTheme.white})),Ut=w.ZP.h1.withConfig({displayName:"Header__Heading",componentId:"sc-1mmlp76-1"})(["font-size:19px;margin-bottom:5px;font-weight:500;margin-left:27px;"]),zt=function(e){var t=e.onClick,n=e.heading;return(0,b.jsxs)(St,{children:[(0,b.jsx)(F.Z,{onClick:t,size:"small",children:(0,b.jsx)(Tt.Z,{style:{fill:D._.white,fontSize:"24px"}})}),(0,b.jsx)(Ut,{children:n})]})},Mt=n(87),Ot=w.ZP.div.withConfig({displayName:"AddToGroup__Container",componentId:"sc-1vyu32c-0"})(["padding:10px 24px 10px 16px;height:77px;width:100%;display:flex;align-items:center;border-bottom:1px solid ",";&:hover{cursor:pointer;background-color:",";}"],(function(e){return e.theme.globalTheme.greyLineColor}),(function(e){return e.theme.globalTheme.hoverGrey})),Et=w.ZP.p.withConfig({displayName:"AddToGroup__Text",componentId:"sc-1vyu32c-1"})(["margin-left:16px;"]),Ft=function(e){var t=e.onClick;return(0,b.jsxs)(Ot,{onClick:t,children:[(0,b.jsx)(C.Z,{style:{width:"52px",height:"52px",backgroundColor:"#00a884"},children:(0,b.jsx)(Mt.Z,{style:{width:"32px",height:"32px"}})}),(0,b.jsx)(Et,{children:"New Group"})]})},Bt=w.ZP.div.withConfig({displayName:"ContactsListContainer__Container",componentId:"sc-1177444-0"})(["width:100%;height:calc(100vh - 238px);overflow-y:scroll;flex:1;scrollbar-width:thin;&::-webkit-scrollbar{width:6px !important;height:6px !important;}&::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,0.2);}&::-webkit-scrollbar-track{background:hsla(0,0%,100%,0.1);}"]),Gt=function(e){var t=e.children;return(0,b.jsx)(Bt,{children:t})},Dt=function(e){var t=e.backToSidebar,n=e.selectChat,a=e.toGroupParticipants,l=(0,s.useState)(""),u=l[0],d=l[1],p=(0,h.wY)(),m=p.data,g=p.loading,x=p.error,v=(0,h.kx)(),w=(0,i.Z)(v,1)[0],C=function(){var e=(0,r.Z)(c().mark((function e(r){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({variables:{userIds:[r],limit:1},update:function(e,t){var r=t.data;if(!r)return e;var i=r.createChat;e.modify({fields:{getChats:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=n.readField,a=t.filter((function(e){return Number(r("id",e))===Number(i.id)}));if(1===a.length)return t;var c=e.writeFragment({data:i,fragment:h.Uj});return[].concat((0,o.Z)(t),[c])}}}),n(Number(i.id))}});case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsxs)(Nt,{children:[(0,b.jsx)(zt,{onClick:t,heading:"New Chat"}),(0,b.jsx)(Qe,{value:u,onChange:function(e){d(e.target.value)},placeholder:"Search in contacts"}),(0,b.jsx)(Ft,{onClick:function(){null!==m&&void 0!==m&&m.getContacts&&a()}}),(0,b.jsx)(Gt,{children:(0,b.jsx)(Ve,{loading:g,error:x,children:null===m||void 0===m?void 0:m.getContacts.filter((function(e){return e.firstName.includes(u)||e.lastName.includes(u)})).map((function(e){return(0,b.jsx)(Pt,{firstName:f(e.firstName),lastName:f(e.lastName),about:e.about,profilePictureUrl:e.profilePictureUrl,onClick:function(){return C(Number(e.id))}},"contactId-".concat(e.id))}))})})]})},Lt=w.ZP.div.withConfig({displayName:"ParticipantsContainer__Container",componentId:"sc-i1iutc-0"})(["height:100%;width:100%;display:flex;flex-direction:column;"]),Qt=function(e){var t=e.children;return(0,b.jsx)(Lt,{children:t})},Ht=w.ZP.div.withConfig({displayName:"ContactsContainer__Container",componentId:"sc-blrtbg-0"})(["width:100%;height:calc(100vh - 185px);overflow-y:scroll;flex:1;scrollbar-width:thin;&::-webkit-scrollbar{width:6px !important;height:6px !important;}&::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,0.2);}&::-webkit-scrollbar-track{background:hsla(0,0%,100%,0.1);}"]),Rt=function(e){var t=e.children;return(0,b.jsx)(Ht,{children:t})},qt=n(1267),Yt=function(e){var t=e.onDelete,n=e.name,r=e.profilePictureUrl;return(0,b.jsx)(qt.Z,{label:n,onDelete:t,avatar:(0,b.jsx)(C.Z,{src:r})})},Wt=w.ZP.div.withConfig({displayName:"GroupParticipants__Container",componentId:"sc-pwnbey-0"})(["height:100px;width:100%;padding:10px 36px 10px 36px;border-bottom:1px solid ",";display:flex;flex-direction:column;"],(function(e){return e.theme.globalTheme.greyLineColor})),Xt=w.ZP.div.withConfig({displayName:"GroupParticipants__ChipContainer",componentId:"sc-pwnbey-1"})(["display:flex;align-items:center;padding-bottom:10px;overflow-x:auto;overflow-y:hidden;scrollbar-width:thin;&::-webkit-scrollbar{width:6px !important;height:6px !important;}&::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,0.2);}&::-webkit-scrollbar-track{background:hsla(0,0%,100%,0.1);}"]),Kt=w.ZP.div.withConfig({displayName:"GroupParticipants__InputContainer",componentId:"sc-pwnbey-2"})([""]),$t=w.ZP.input.withConfig({displayName:"GroupParticipants__Input",componentId:"sc-pwnbey-3"})(["width:100%;height:32px;border:none;border-bottom:1px solid ",";outline:none;font-size:16px;&::placeholder{font-size:16px;color:",";}"],(function(e){return e.theme.globalTheme.greyLineColor}),(function(e){return e.theme.globalTheme.secondaryGreyFont})),Vt=function(e){var t=e.children,n=e.onChange,r=e.value;return(0,b.jsxs)(Wt,{children:[(0,b.jsx)(Xt,{children:t}),(0,b.jsx)(Kt,{children:(0,b.jsx)($t,{placeholder:"Type contact name",onChange:n,value:r})})]})},Jt=n(9973),en=(0,w.ZP)("div").withConfig({displayName:"NextButton__Container",componentId:"sc-16lp3wx-0"})(["width:100%;height:70px;display:flex;align-items:center;justify-content:center;border-top:",";"],(function(e){return e.withoutLine?"none":"1px solid ".concat(e.theme.globalTheme.greyLineColor)})),tn=w.ZP.button.withConfig({displayName:"NextButton__Button",componentId:"sc-16lp3wx-1"})(["border-radius:50%;height:50px;width:50px;background-color:",";border:none;display:flex;align-items:center;justify-content:center;&:hover{filter:brightness(105%);cursor:pointer;}"],(function(e){return e.theme.globalTheme.buttonGreen})),nn=function(e){var t=e.onClick,n=e.withoutLine;return(0,b.jsx)(en,{withoutLine:!!n,children:(0,b.jsx)(tn,{type:t?"button":"submit",onClick:t,children:(0,b.jsx)(Jt.Z,{style:{fill:"#fff",fontSize:"24px"}})})})},rn=function(e){var t=e.toContactsTab,n=e.toCreateGroup,r=e.selectedContacts,i=e.setSelectedContacts,a=(0,s.useState)(""),c=a[0],l=a[1],u=(0,d.x)().readQuery({query:h.$0}).getContacts;return(0,b.jsxs)(Qt,{children:[(0,b.jsx)(zt,{onClick:t,heading:"Add group participants"}),(0,b.jsx)(Vt,{onChange:function(e){l(e.target.value)},value:c,children:r.length>0&&r.map((function(e){return(0,b.jsx)(Yt,{onDelete:function(){return function(e){var t=r.filter((function(t){return Number(t.id)!==e}));i(t)}(Number(e.id))},name:"".concat(f(e.firstName)," ").concat(f(e.lastName)),profilePictureUrl:e.profilePictureUrl?e.profilePictureUrl:void 0},"selectedContactId-".concat(e.id))}))}),(0,b.jsx)(Rt,{children:function(e){return u.filter((function(t){return e?t.firstName.toLowerCase().includes(e.toLowerCase())||t.lastName.toLowerCase().includes(e.toLowerCase()):t}))}(c).map((function(e){return(0,b.jsx)(Pt,{firstName:f(e.firstName),lastName:f(e.lastName),about:e.about,profilePictureUrl:e.profilePictureUrl,onClick:function(){return function(e){r.find((function(t){return Number(t.id)===Number(e.id)}))||(i([].concat((0,o.Z)(r),[e])),l(""))}(e)}},"contactId-".concat(e.id))}))}),r.length>0&&(0,b.jsx)(nn,{onClick:n})]})},on=function(){var e=(0,s.useState)(null),t=e[0],n=e[1],r=(0,s.useState)(null),o=r[0],i=r[1],a=(0,s.useState)(null),c=a[0],l=a[1];return(0,s.useEffect)((function(){if(t){var e=new FileReader;e.onloadend=function(){i(e.result)},e.readAsDataURL(t)}else i(null)}),[t]),{handleFileChange:function(e){n(e.target.files?e.target.files[0]:null)},handleClosePreview:function(){i(null)},croppedImage:c,setCroppedImage:l,preview:o}},an=w.ZP.form.withConfig({displayName:"CreateGroupForm__Form",componentId:"sc-54b06q-0"})(["width:100%;height:100%;display:flex;flex-direction:column;justify-content:flex-start;align-items:center;"]),cn=function(e){var t=e.onSubmit,n=e.children;return(0,b.jsx)(an,{onSubmit:t,children:n})},sn=w.ZP.div.withConfig({displayName:"MemberInput__InputContainer",componentId:"sc-1cxcpon-0"})(["margin-top:24px;width:100%;display:flex;flex-direction:column;justify-content:center;margin-bottom:52px;padding:0 10%;"]),ln=w.ZP.input.withConfig({displayName:"MemberInput__Input",componentId:"sc-1cxcpon-1"})(["border:none;outline:none;border-bottom:3px solid #00a884;font-size:16px;height:38px;width:100%;&::placeholder{font-size:16px;color:",";}"],(function(e){return e.theme.globalTheme.secondaryGreyFont})),un=w.ZP.label.withConfig({displayName:"MemberInput__Label",componentId:"sc-1cxcpon-2"})(["color:#00a884;font-size:14px;"]),dn=function(e){var t=e.value,n=e.onChange,r=e.placeholder,o=e.type,i=e.name;return(0,b.jsxs)(sn,{children:[(0,b.jsx)(un,{children:r}),(0,b.jsx)(ln,{onChange:n,value:t,type:o,name:i})]})},hn=n(7483),pn=w.ZP.div.withConfig({displayName:"ImageButton__ImageButtonContainer",componentId:"sc-zhb496-0"})(["display:flex;align-items:center;justify-content:center;padding:28px 32px;"]),fn=(0,w.ZP)("div").withConfig({displayName:"ImageButton__ImageBackground",componentId:"sc-zhb496-1"})(["height:200px;width:200px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:",";background-size:cover;"],(function(e){var t=e.background;return t?"url(".concat(t,") no-repeat "):"#fff"})),mn=w.ZP.label.withConfig({displayName:"ImageButton__ImageLabel",componentId:"sc-zhb496-2"})(["height:200px;width:200px;display:flex;align-items:center;justify-content:center;border-radius:50%;background-color:rgba(112,126,134,0.7);&:hover{cursor:pointer;filter:brightness(105%);}"]),gn=w.ZP.input.withConfig({displayName:"ImageButton__ImageInput",componentId:"sc-zhb496-3"})(["display:none;"]),xn=w.ZP.div.withConfig({displayName:"ImageButton__IconContainer",componentId:"sc-zhb496-4"})(["display:flex;flex-direction:column;align-items:center;"]),bn=w.ZP.p.withConfig({displayName:"ImageButton__IconCaption",componentId:"sc-zhb496-5"})(["font-weight:300;font-size:12px;color:#fff;text-transform:uppercase;margin-top:5px;"]),vn=function(e){var t=e.onChange,n=e.placeholder,r=e.background;return(0,b.jsx)(pn,{children:(0,b.jsx)(fn,{background:r,children:(0,b.jsxs)(mn,{htmlFor:"file-upload",children:[(0,b.jsx)(gn,{id:"file-upload",type:"file",accept:"image/*",onChange:t,onClick:function(e){e.target.value=""}}),(0,b.jsxs)(xn,{children:[(0,b.jsx)(hn.Z,{style:{fontSize:"32px",fill:"#fff"}}),(0,b.jsx)(bn,{children:n})]})]})})})},wn=w.ZP.header.withConfig({displayName:"ImageEditorHeader__Header",componentId:"sc-fuwn8b-0"})(["display:flex;background-color:",";color:",";align-items:center;height:50px;padding:0 24px;"],(function(e){return e.theme.globalTheme.darkGreen}),(function(e){return e.theme.globalTheme.white})),Cn=w.ZP.button.withConfig({displayName:"ImageEditorHeader__CloseButton",componentId:"sc-fuwn8b-1"})(["display:flex;align-items:center;justify-content:center;background-color:transparent;outline:none;border:none;margin-right:24px;&:hover{cursor:pointer;}"]),yn=w.ZP.h1.withConfig({displayName:"ImageEditorHeader__Heading",componentId:"sc-fuwn8b-2"})(["font-size:19px;font-weight:500;"]),jn=w.ZP.button.withConfig({displayName:"ImageEditorHeader__UploadButton",componentId:"sc-fuwn8b-3"})(["margin-left:auto;display:flex;align-items:center;justify-content:center;background-color:transparent;outline:none;border:none;font-size:14px;color:",";&:hover{cursor:pointer;}"],(function(e){return e.theme.globalTheme.white})),kn=w.ZP.input.withConfig({displayName:"ImageEditorHeader__Input",componentId:"sc-fuwn8b-4"})(["display:none;"]),_n=function(e){var t=e.close,n=e.changeFile,r=(0,s.useRef)();return(0,b.jsxs)(wn,{children:[(0,b.jsx)(Cn,{onClick:t,children:(0,b.jsx)(me.Z,{style:{fill:"#b2d8d1"}})}),(0,b.jsx)(yn,{children:"Drag image to adjust"}),(0,b.jsxs)(jn,{onClick:function(){var e;null===(e=r.current)||void 0===e||e.click()},children:[(0,b.jsx)(kn,{type:"file",onChange:n,ref:r,accept:"image/*"}),"Upload"]})]})},In=w.ZP.div.withConfig({displayName:"ImageEditorContainer__Container",componentId:"sc-1u0cxc3-0"})(["position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);width:500px;height:500px;border-radius:5px;overflow:hidden;"]),An=function(e){var t=e.children;return(0,b.jsx)(In,{children:t})},Pn=w.ZP.div.withConfig({displayName:"ImagePreviewContainer__Container",componentId:"sc-sb0mll-0"})(["position:relative;width:100%;height:360px;"]),Zn=function(e){var t=e.children;return(0,b.jsx)(Pn,{children:t})},Nn=w.ZP.div.withConfig({displayName:"ImageEditorOverlay__Overlay",componentId:"sc-15r31we-0"})(["position:fixed;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,0.7);"]),Tn=function(e){var t=e.children;return(0,b.jsx)(Nn,{children:t})},Sn=w.ZP.div.withConfig({displayName:"ZoomButtons__Container",componentId:"sc-8ux1ut-0"})(["background-color:",";position:absolute;display:flex;flex-direction:column;border:none;outline:none;border-radius:3px;right:7px;top:50%;transform:translateY(-50%);background-color:",";"],(function(e){return e.theme.globalTheme.white}),(function(e){return e.theme.globalTheme.white})),Un=w.ZP.button.withConfig({displayName:"ZoomButtons__ZoomButton",componentId:"sc-8ux1ut-1"})(["width:28px;height:28px;border:none;outline:none;border-radius:3px;background-color:transparent;display:flex;align-items:center;justify-content:center;&:hover{cursor:pointer;background-color:",";}"],(function(e){return e.theme.globalTheme.hoverGrey})),zn=function(e){var t=e.zoomIn,n=e.zoomOut,r=e.zoom;return(0,b.jsxs)(Sn,{children:[(0,b.jsx)(Un,{value:r,onClick:t,children:(0,b.jsx)(de.Z,{})}),(0,b.jsx)(Un,{value:r,onClick:n,children:(0,b.jsx)(he.Z,{})})]})},Mn=n(637),On=w.ZP.div.withConfig({displayName:"ImageEditorFooter__Container",componentId:"sc-obz2z-0"})(["height:90px;background-color:",";position:relative;"],(function(e){return e.theme.globalTheme.white})),En=w.ZP.button.withConfig({displayName:"ImageEditorFooter__DoneButton",componentId:"sc-obz2z-1"})(["border:none;outline:none;border-radius:50%;width:60px;height:60px;background-color:",";position:absolute;right:40px;top:-100%;transform:translateY(100%);display:flex;align-items:center;justify-content:center;&:hover{cursor:pointer;filter:brightness(105%);}"],(function(e){return e.theme.globalTheme.buttonGreen})),Fn=function(e){var t=e.onClick;return(0,b.jsx)(On,{children:(0,b.jsx)(En,{onClick:t,children:(0,b.jsx)(Mn.Z,{style:{fill:"#fff",width:"30px",height:"30px"}})})})},Bn=function(e){var t=e.imageUrl,n=e.closePreview,o=e.changeFile,i=e.setCroppedImage,a=te(),l=a.crop,u=a.setCrop,d=a.zoom,h=a.setZoom,p=a.zoomIn,f=a.zoomOut,m=a.onCropComplete,g=a.croppedAreaPixels,x=(0,s.useCallback)((0,r.Z)(c().mark((function e(){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!g){e.next=7;break}return e.next=4,ie(t,g);case 4:r=e.sent,i(r),n();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[g]);return(0,b.jsx)(Tn,{children:(0,b.jsx)(Se.default,{onOutsideClick:function(){n()},children:(0,b.jsxs)(An,{children:[(0,b.jsx)(_n,{close:n,changeFile:o}),(0,b.jsxs)(Zn,{children:[(0,b.jsx)(ee.Z,{image:t,crop:l,zoom:d,cropShape:"round",aspect:1,onCropChange:u,onCropComplete:m,onZoomChange:h}),(0,b.jsx)(zn,{zoom:d,zoomIn:p,zoomOut:f})]}),(0,b.jsx)(Fn,{onClick:x})]})})})},Gn=n(3935),Dn=function(e){var t=e.children,n=e.open,r=(0,s.useState)(!1),o=r[0],i=r[1];return(0,s.useEffect)((function(){i(!0)}),[]),o&&n?Gn.createPortal(t,document.getElementById("portal")):null},Ln=function(e){var t=e.toGroupParticipants,n=e.selectedContacts,a=e.selectChat,l=e.backToSidebar,u=e.setSelectedContacts,d=on(),p=d.handleFileChange,f=d.handleClosePreview,m=d.croppedImage,g=d.setCroppedImage,x=d.preview,v=(0,s.useState)(""),w=v[0],C=v[1],y=(0,h.Te)(),j=(0,i.Z)(y,2),k=j[0],_=j[1].data,I=(0,h.kx)(),A=(0,i.Z)(I,1)[0],P=function(){var e=(0,r.Z)(c().mark((function e(){var t,i,s=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:null,i=n.map((function(e){return Number(e.id)})),e.next=4,A({variables:{groupName:w,userIds:i,limit:1,groupAvatarUrl:t},update:function(){var e=(0,r.Z)(c().mark((function e(t,n){var r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.data){e.next=3;break}return e.abrupt("return",t);case 3:return i=r.createChat,e.next=6,t.modify({fields:{getChats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=t.writeFragment({data:i,fragment:h.Uj});return[n].concat((0,o.Z)(e))},getPresignedUrl:function(){}}});case 6:a(Number(i.id));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()});case 4:l(),u([]),C("");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=(0,r.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),0!==w.length){e.next=3;break}return e.abrupt("return");case 3:if(!m){e.next=8;break}return e.next=6,k();case 6:e.next=9;break;case 8:P();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){_&&m&&function(){var e=(0,r.Z)(c().mark((function e(){var t,n,r,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.getPresignedUrl,n=t.presignedUrl,r=t.key,e.next=3,J().put(n,m,{headers:{"Content-Type":m.type}});case 3:o="".concat("https://jt-whatsapp-clone-bucket.s3.eu-west-2.amazonaws.com","/").concat(r),P(o);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();return function(){return g(null)}}),[_]),(0,b.jsxs)(Nt,{children:[(0,b.jsx)(zt,{heading:"New group",onClick:t}),(0,b.jsxs)(cn,{onSubmit:Z,children:[(0,b.jsx)(vn,{background:m?URL.createObjectURL(m):null,onChange:p,placeholder:"Add group icon"}),(0,b.jsx)(dn,{onChange:function(e){C(e.target.value)},type:"text",value:w,name:"groupName",placeholder:"Group Subject"}),w&&(0,b.jsx)(nn,{withoutLine:!0}),(0,b.jsx)(Dn,{open:!!x,children:x&&(0,b.jsx)(Bn,{setCroppedImage:g,imageUrl:x,closePreview:f,changeFile:p})})]})]})},Qn=w.ZP.div.withConfig({displayName:"EditProfileFromContainer__Container",componentId:"sc-nryww0-0"})(["width:100%;height:calc(100vh - 108px);overflow-y:scroll;scrollbar-width:thin;&::-webkit-scrollbar{width:6px !important;height:6px !important;}&::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,0.2);}&::-webkit-scrollbar-track{background:hsla(0,0%,100%,0.1);}"]),Hn=function(e){var t=e.children;return(0,b.jsx)(Qn,{children:t})},Rn=n(7804),qn=w.ZP.div.withConfig({displayName:"EditProfileSubmitButton__ButtonContainer",componentId:"sc-yhw2jr-0"})(["display:flex;align-items:center;justify-content:center;padding:0 0 40px 0;width:100%;"]),Yn=w.ZP.button.withConfig({displayName:"EditProfileSubmitButton__Button",componentId:"sc-yhw2jr-1"})(["background-color:#25d366;font-size:14px;font-weight:600;color:",";outline:none;border-radius:3px;border:none;height:34px;width:130px;&:hover{cursor:pointer;filter:brightness(105%);}"],(function(e){return e.theme.globalTheme.white})),Wn=function(e){var t=e.children;return(0,b.jsx)(qn,{children:(0,b.jsx)(Yn,{type:"submit",children:t})})};function Xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(n),!0).forEach((function(t){(0,Ne.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $n=function(e){var t=e.backToSidebar,n=(0,h.Te)(),o=(0,i.Z)(n,2),a=o[0],l=o[1].data,u=(0,h.kf)(),p=(0,i.Z)(u,1)[0],f=on(),m=f.handleFileChange,g=f.handleClosePreview,x=f.croppedImage,v=f.setCroppedImage,w=f.preview,C=(0,d.x)().readQuery({query:h.W$}).currentUser,y=(0,s.useState)(Kn({},C)),j=y[0],k=y[1],_=j.username,I=j.firstName,A=j.lastName,P=j.profilePictureUrl,Z=j.about,N=function(e){k(Kn(Kn({},j),{},(0,Ne.Z)({},e.target.name,e.target.value)))},T=function(){var e=(0,r.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p({variables:Kn(Kn({},j),{},{profilePictureUrl:n}),update:function(){var e=(0,r.Z)(c().mark((function e(t,n){var r,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.data){e.next=3;break}return e.abrupt("return",t);case 3:o=r.editProfile,t.writeQuery({data:{currentUser:o},query:h.W$}),t.modify({fields:{getPresignedUrl:function(){}}});case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()});case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,r.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!x){e.next=6;break}return e.next=4,a();case 4:e.next=7;break;case 6:T();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,s.useEffect)((function(){x&&l&&function(){var e=(0,r.Z)(c().mark((function e(){var t,n,r,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.getPresignedUrl,n=t.presignedUrl,r=t.key,e.next=3,J().put(n,x,{headers:{"Content-Type":x.type}});case 3:o="".concat("https://jt-whatsapp-clone-bucket.s3.eu-west-2.amazonaws.com","/").concat(r),T(o);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();return function(){return v(null)}}),[l]),(0,b.jsxs)(s.Fragment,{children:[(0,b.jsx)(zt,{heading:"Edit Profile",onClick:t}),(0,b.jsx)(Hn,{children:(0,b.jsxs)(Rn.Z,{onSubmit:S,children:[(0,b.jsx)(vn,{placeholder:"Add profile image",background:x?URL.createObjectURL(x):P||null,onChange:m}),(0,b.jsx)(Dn,{open:!!w,children:w&&(0,b.jsx)(Bn,{setCroppedImage:v,imageUrl:w,closePreview:g,changeFile:m})}),(0,b.jsx)(dn,{onChange:N,type:"text",value:_,name:"username",placeholder:"Username"}),(0,b.jsx)(dn,{onChange:N,type:"text",value:I,name:"firstName",placeholder:"First name"}),(0,b.jsx)(dn,{onChange:N,type:"text",value:A,name:"lastName",placeholder:"Last name"}),(0,b.jsx)(dn,{onChange:N,type:"text",value:Z||"",name:"about",placeholder:"About"}),(0,b.jsx)(Wn,{children:"Update profile"})]})})]})},Vn=w.ZP.div.withConfig({displayName:"TabContainer__Container",componentId:"sc-1euu03j-0"})(["width:100%;height:100%;position:absolute;&.tab-enter{transform:translateX(-100%);transition:transform 200ms ease-in;}&.tab-enter-active{transform:translateX(0%);}&.tab-exit{transform:translateX(0%);z-index:-1;transition:transform 200ms ease-in;}&.tab-exit-active{transform:translateX(100%);z-index:-1;}"]),Jn=function(e){var t=e.tabIn,n=e.children;return(0,b.jsx)(Me.Z,{in:t,classNames:"tab",unmountOnExit:!0,timeout:300,children:(0,b.jsx)(Vn,{children:n})})},er=function(e){return e.sort((function(e,t){return e.firstName.localeCompare(t.firstName)}))},tr=w.ZP.div.withConfig({displayName:"User__Container",componentId:"sc-nnoym2-0"})(["width:100%;height:77px;padding:10px 24px 10px 16px;display:flex;align-items:center;border-bottom:1px solid ",";background-color:",";&:hover{background-color:",";}"],(function(e){return e.theme.globalTheme.greyLineColor}),(function(e){return e.theme.globalTheme.white}),(function(e){return e.theme.globalTheme.hoverGrey})),nr=w.ZP.div.withConfig({displayName:"User__TextContainer",componentId:"sc-nnoym2-1"})(["display:flex;flex-direction:column;margin-left:16px;"]),rr=w.ZP.p.withConfig({displayName:"User__Username",componentId:"sc-nnoym2-2"})(["font-size:16px;font-weight:400;"]),or=w.ZP.p.withConfig({displayName:"User__Name",componentId:"sc-nnoym2-3"})(["font-size:14px;color:",";"],(function(e){return e.theme.globalTheme.secondaryGreyFont})),ir=function(e){var t=e.name,n=e.username,r=e.profilePictureUrl,o=e.children;return(0,b.jsxs)(tr,{children:[(0,b.jsx)(C.Z,{style:{width:"52px",height:"52px"},src:r}),(0,b.jsxs)(nr,{children:[(0,b.jsx)(rr,{children:n}),(0,b.jsx)(or,{children:t})]}),o]})},ar=(0,w.ZP)("button").withConfig({displayName:"UserButtons__Button",componentId:"sc-1136qq0-0"})(["display:flex;align-items:center;justify-content:center;margin-left:auto;font-size:14px;background-color:",";color:",";font-weight:600;outline:none;border-radius:3px;border:none;padding:10px 15px;width:75px;&:hover{cursor:pointer;filter:brightness(105%);}"],(function(e){return e.isContact?"#25d366":"#00a884"}),(function(e){return e.theme.globalTheme.white})),cr=function(e){var t=e.addContact,n=e.removeContact,r=e.isContact;return e.isCurrentUser?(0,b.jsx)(s.Fragment,{}):r?(0,b.jsx)(ar,{isContact:r,onClick:n,children:"Added"}):(0,b.jsx)(ar,{isContact:r,onClick:t,children:"Add"})},sr=w.ZP.div.withConfig({displayName:"SearchUsersContainer__Container",componentId:"sc-1ijsj3e-0"})(["height:calc(100vh - 161px);overflow-y:scroll;scrollbar-width:thin;&::-webkit-scrollbar{width:6px !important;height:6px !important;}&::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,0.2);}&::-webkit-scrollbar-track{background:hsla(0,0%,100%,0.1);}"]),lr=function(e){var t=e.children;return(0,b.jsx)(sr,{children:t})},ur=w.ZP.div.withConfig({displayName:"GetMoreUsersButton__Container",componentId:"sc-175a1l2-0"})(["display:flex;justify-content:center;align-items:center;width:100%;padding:20px 0;"]),dr=w.ZP.button.withConfig({displayName:"GetMoreUsersButton__Button",componentId:"sc-175a1l2-1"})(["border-radius:3px;outline:none;border:none;background-color:",";display:flex;justify-content:center;align-items:center;color:",";padding:10px 15px;width:75px;font-weight:600;&:hover{cursor:pointer;filter:brightness(105%);}"],(function(e){return e.theme.globalTheme.secondaryGreyFont}),(function(e){return e.theme.globalTheme.white})),hr=function(e){var t=e.children,n=e.onClick;return(0,b.jsx)(ur,{children:(0,b.jsx)(dr,{onClick:n,children:t})})};function pr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pr(Object(n),!0).forEach((function(t){(0,Ne.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mr,gr,xr=function(e){var t=e.backToSidebar,n=(0,d.x)(),a=n.readQuery({query:h.W$}).currentUser,l=(0,s.useState)(""),u=l[0],p=l[1],m=(0,s.useState)(0),g=m[0],x=m[1],v=(0,s.useState)(5),w=v[0],C=(v[1],(0,h.OV)()),y=(0,i.Z)(C,2),j=y[0],k=y[1],_=k.data,I=k.loading,A=k.error,P=k.fetchMore,Z=(0,h.wY)().data,N=(0,h.Km)(),T=(0,i.Z)(N,1)[0],S=(0,h.px)(),U=(0,i.Z)(S,1)[0],z=function(){var e=(0,r.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(t.target.value),x(0),e.next=4,j({variables:{searchTerm:t.target.value,page:0,limit:w}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=3;break}return e.next=3,P({variables:{searchTerm:u,page:g+1,limit:w}});case 3:x(g+1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=(0,r.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T({variables:{contactId:t},update:function(e,t){var r=t.data;if(!r)return e;var i=r.addToContacts.contact;e.modify({fields:{getContacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(0===e.length)return[i];var t=n.readQuery({query:h.$0}),r=t.getContacts,a=[fr({},i)].concat((0,o.Z)(r));return er(a),a}}})}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,r.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({variables:{contactId:t},update:function(e,r){if(!r.data)return e;e.modify({fields:{getContacts:function(e){var r=n.readQuery({query:h.$0}).getContacts;return r.filter((function(e){return Number(e.id)!==t}))}}})}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsxs)(Nt,{children:[(0,b.jsx)(zt,{heading:"Search users",onClick:t}),(0,b.jsx)(Qe,{onChange:z,value:u,placeholder:"Search for users"}),(0,b.jsxs)(lr,{children:[(0,b.jsx)(Ve,{loading:I,error:A,children:Z&&(null===_||void 0===_?void 0:_.searchUsers.users.map((function(e){return(0,b.jsx)(ir,{username:e.username,name:"".concat(f(e.firstName)," ").concat(f(e.lastName)),profilePictureUrl:e.profilePictureUrl?e.profilePictureUrl:void 0,children:(0,b.jsx)(cr,{addContact:function(){return O(Number(e.id))},removeContact:function(){return E(Number(e.id))},isContact:!!Z.getContacts.find((function(t){return Number(t.id)===Number(e.id)})),isCurrentUser:Number(e.id)===Number(a.id)})},"searched-user-id-".concat(e.id))})))}),(null===_||void 0===_?void 0:_.searchUsers.hasMore)&&(0,b.jsx)(hr,{onClick:M,children:"More"})]})]})},br=w.ZP.div.withConfig({displayName:"HomePageContainer__Container",componentId:"sc-ra5wsg-0"})(["display:flex;height:100vh;width:100vw;overflow:hidden;"]),vr=function(e){var t=e.children;return(0,b.jsx)(br,{children:t})},wr=n(168),Cr=w.ZP.div.withConfig({displayName:"HomeSidebarContainer__Container",componentId:"sc-bi9z8y-0"})(["flex:40%;position:relative;min-width:330px;border-right:1px solid ",";",";"],(function(e){return e.theme.globalTheme.greyLineColor}),(function(e){return e.theme.homePageTheme.mediumScreen(mr||(mr=(0,wr.Z)(["\n  flex: 35%;\n"])))})),yr=function(e){var t=e.children;return(0,b.jsx)(Cr,{children:t})},jr=w.ZP.div.withConfig({displayName:"HomeChatContainer__Container",componentId:"sc-jt4c5n-0"})(["flex:60%;position:relative;",";"],(function(e){return e.theme.homePageTheme.mediumScreen(gr||(gr=(0,wr.Z)(["\n    flex: 65%;\n  "])))})),kr=function(e){var t=e.children;return(0,b.jsx)(jr,{children:t})},_r=!0,Ir=function(){var e=(0,d.x)(),t=(0,u.useRouter)(),n=(0,h.XC)(),a=n.data,p=n.loading,f=n.error,m=(0,s.useState)(null),g=m[0],x=m[1],v=(0,s.useState)([]),w=v[0],C=v[1],y=(0,s.useState)(),j=y[0],k=y[1],_=(0,s.useState)(1),I=_[0],A=_[1],P=(0,h.LN)(),Z=(0,i.Z)(P,2),N=Z[0],T=Z[1].data,S=(0,h._y)(),U=(0,i.Z)(S,2),z=U[0],M=U[1],O=(M.data,M.loading),E=M.error;(0,h.bn)({onSubscriptionData:function(e){var t,n=e.client,r=e.subscriptionData;if(null!==r&&void 0!==r&&null!==(t=r.data)&&void 0!==t&&t.newMessage&&null!==a&&void 0!==a&&a.currentUser){var o=r.data.newMessage,i=n.readQuery({query:h.bs});if(i){var c,s=i.getChats,l=0===s.filter((function(e){return Number(e.id)===Number(o.chatId)})).length;if(!s||l)N({variables:{chatId:null===r||void 0===r||null===(c=r.data)||void 0===c?void 0:c.newMessage.chatId,limit:1}})}}}}),(0,s.useEffect)((function(){if(T){var t=e.readQuery({query:h.bs}).getChats;0===t.filter((function(e){return Number(e.id)===Number(T.getChat.id)})).length&&e.writeQuery({query:h.bs,data:{getChats:[T.getChat].concat((0,o.Z)(t))}})}}),[T,e]);var F=function(e){x(e)},B=function(e){A(e)},G=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:t.push("/login");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,b.jsxs)("div",{children:[(0,b.jsxs)(l.default,{children:[(0,b.jsx)("title",{children:"Whatsapp Clone"}),(0,b.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,b.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,b.jsx)(vr,{children:(0,b.jsx)(Ve,{error:f||E,loading:p||O,children:(null===a||void 0===a?void 0:a.currentUser)&&(0,b.jsxs)(s.Fragment,{children:[(0,b.jsxs)(yr,{children:[(0,b.jsx)(Jn,{tabIn:1===I,children:(0,b.jsx)(ht,{currentUser:a.currentUser,toContactsTab:function(){return B(2)},toEditProfileTab:function(){return B(5)},toSearchUsers:function(){return B(6)},handleClick:F,chatId:g,handleSetChat:function(e){k(e)},handleLogout:G})}),(0,b.jsx)(Jn,{tabIn:2===I,children:(0,b.jsx)(Dt,{selectChat:F,backToSidebar:function(){return B(1)},toGroupParticipants:function(){return B(3)}})}),(0,b.jsx)(Jn,{tabIn:3===I,children:(0,b.jsx)(rn,{toContactsTab:function(){return B(2)},toCreateGroup:function(){return B(4)},selectedContacts:w,setSelectedContacts:C})}),(0,b.jsx)(Jn,{tabIn:4===I,children:(0,b.jsx)(Ln,{toGroupParticipants:function(){return B(3)},selectedContacts:w,selectChat:F,backToSidebar:function(){return B(1)},setSelectedContacts:C})}),(0,b.jsx)(Jn,{tabIn:5===I,children:(0,b.jsx)($n,{backToSidebar:function(){return B(1)}})}),(0,b.jsx)(Jn,{tabIn:6===I,children:(0,b.jsx)(xr,{backToSidebar:function(){return B(1)}})})]}),(0,b.jsx)(kr,{children:g&&j?(0,b.jsx)(Ze,{chatId:g,chat:j,userId:Number(a.currentUser.id)}):(0,b.jsx)(jt,{})})]})})})]})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5211)}])}},function(e){e.O(0,[774,885,234,959,371,698,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);